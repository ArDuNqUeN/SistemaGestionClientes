<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Gestión de Clientes</title>
<link rel="stylesheet" href="css/estilos.css">
</head>
<body>

<h1>Sistema de Gestión de Clientes</h1>

<!-- Botón para alternar entre formulario y tabla de datos -->
<button id="toggleView">Ver Tabla de Datos</button>

<!-- =====================
     FORMULARIO DE CLIENTES
     ===================== -->
<form id="contactoForm">
    <p>Los campos marcados con * son obligatorios.</p>

    <!-- Sección de datos personales -->
    <fieldset>
        <legend>Datos personales</legend>
        <label for="nombre">Nombre*:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="apellido">Apellido*:</label>
        <input type="text" id="apellido" name="apellido" required>

        <label for="dni">DNI*:</label>
        <input type="text" id="dni" name="dni" required>

        <label for="contraseña">Contraseña*:</label>
        <input type="password" id="contraseña" name="contraseña" required>

        <label for="fecha">Fecha de nacimiento:</label>
        <input type="date" id="fecha" name="fecha">

        <label for="cuenta">Cuenta Bancaria:</label>
        <input type="text" id="cuenta" name="cuenta">
    </fieldset>

    <!-- Sección de contacto -->
    <fieldset>
        <legend>Contacto</legend> 
        <label for="telefono">Teléfono*:</label>
        <input type="tel" id="telefono" name="telefono" required>

        <label for="email">Email*:</label>
        <input type="email" id="email" name="email" required>

        <label for="web">Página web, URL:</label>
        <input type="url" id="web" name="web">
    </fieldset>

    <!-- Sección de dirección -->
    <fieldset>
        <legend>Dirección y otros datos</legend>
        <label for="calle">Calle:</label>
        <input type="text" id="calle" name="calle">

        <label for="localidad">Localidad:</label>
        <input type="text" id="localidad" name="localidad">

        <label for="provincia">Provincia:</label>
        <input type="text" id="provincia" name="provincia">

        <label for="cp">Código Postal:</label>
        <input type="text" id="cp" name="cp">
    </fieldset>

    <!-- Botones de envío y limpieza -->
    <div class="botones">
        <p>
            <input type="submit" value="Enviar">
            <input type="reset" value="Limpiar">
        </p>
    </div>
</form>

<!-- =====================
     TABLA DE DATOS
     ===================== -->
<table id="datosTabla" style="display:none;">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellidos</th>
            <th>DNI</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<!-- =====================
     SCRIPT DE JAVASCRIPT
     ===================== -->
<script>
// ============================
// CLASE PARA DEFINIR UN CLIENTE
// ============================
class Persona {
    constructor(nombre, apellido, dni, email) {
        this.nombre = nombre;     // Propiedad nombre
        this.apellido = apellido; // Propiedad apellido
        this.dni = dni;           // Propiedad DNI
        this.email = email;       // Propiedad email
    }

    // Método para mostrar resumen del cliente
    resumen() {
        return `${this.nombre} ${this.apellido} (${this.dni}) - ${this.email}`;
    }
}

// ============================
// ARRAY PARA GUARDAR LOS CLIENTES
// ============================
const listaPersonas = [];

// ============================
// ELEMENTOS DEL DOM
// ============================
const form = document.getElementById("contactoForm");           // Formulario
const tbody = document.querySelector("#datosTabla tbody");       // Cuerpo de la tabla
const toggleBtn = document.getElementById("toggleView");        // Botón toggle
const tabla = document.getElementById("datosTabla");            // Tabla
const resetBtn = form.querySelector('input[type="reset"]');     // Botón limpiar

// ============================
// FUNCIONES
// ============================

// Función para mostrar la tabla con los clientes añadidos
function mostrarTabla() {
    tbody.innerHTML = ""; // Limpiar tabla
    listaPersonas.forEach(p => {
        const fila = document.createElement("tr"); // Crear fila
        fila.innerHTML = `
            <td>${p.nombre}</td>
            <td>${p.apellido}</td>
            <td>${p.dni}</td>
            <td>${p.email}</td>
        `;
        tbody.appendChild(fila); // Añadir fila al tbody
    });
}

// ============================
// EVENT LISTENERS
// ============================

// Alternar visibilidad entre formulario y tabla
toggleBtn.addEventListener("click", () => {
    const formVisible = form.style.display !== "none"; // Verificar estado actual
    form.style.display = formVisible ? "none" : "block";
    tabla.style.display = formVisible ? "table" : "none";
    toggleBtn.textContent = formVisible ? "Volver al Formulario" : "Ver Tabla de Datos";
});

// Manejar envío del formulario
form.addEventListener("submit", (e) => {
    e.preventDefault(); // Evitar recarga de página

    // Obtener valores de los inputs
    const nombre = document.getElementById("nombre").value;
    const apellido = document.getElementById("apellido").value;
    const dni = document.getElementById("dni").value;
    const email = document.getElementById("email").value;

    // Crear nueva instancia de Persona
    const persona = new Persona(nombre, apellido, dni, email);
    listaPersonas.push(persona); // Añadir a array

    mostrarTabla(); // Actualizar tabla
    form.reset();   // Limpiar formulario
});

// Evento para limpiar formulario
resetBtn.addEventListener("click", () => {
    console.log("Formulario limpiado");
});
</script>

</body>
</html>
